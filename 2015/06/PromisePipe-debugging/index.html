<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>PromisePipe: debugging | @edjafarov</title>
  <meta name="author" content="Eldar Djafarov">
  
  <meta name="description" content="edjafarov blog, javascript, nodejs, compy, component">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="PromisePipe: debugging"/>
  <meta property="og:site_name" content="@edjafarov"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="@edjafarov" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css?v=1" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-317979-12', 'auto');
  ga('send', 'pageview');
</script>

</head>

<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">@edjafarov</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
<div class="alignleft" style="margin-top: 15px">


</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
  
    <h1 class="title">PromisePipe: debugging</h1>
  

      
        <p class="published">
          Published: <time datetime="2015-06-30T17:04:14.000Z">Jun 30 2015</time>
        </p>
      
    </header>
    <div class="entry">
      
        <p>While Promises look nice there is one thing I always hated about them. They are awful for debugging and they fail silently if you have a typo in your code. You need to catch the error otherwise you will never know what happened. So in PromisePipes I decided to fix that.</p>
<p>So PromisePipe in debug mode shows unhandled exceptions in console:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Failed inside test</span><br><span class="line"><span class="string">ReferenceError:</span> ff is not defined</span><br><span class="line">Object.test@<span class="regexp">/Users/</span>edjafarov<span class="regexp">/work/</span>PromisePipe<span class="regexp">/tests/</span>PromisePipe.error.spec.<span class="string">js:</span><span class="number">28</span>:<span class="number">16</span></span><br><span class="line">newArgFunc@<span class="regexp">/Users/</span>edjafarov<span class="regexp">/work/</span>PromisePipe<span class="regexp">/src/</span>PromisePipe.<span class="string">js:</span><span class="number">534</span>:<span class="number">26</span></span><br><span class="line">&#123;anonymous&#125;() ($)$$internal$$tryCatch@<span class="regexp">/Users/</span>edjafarov<span class="regexp">/work/</span>PromisePipe<span class="regexp">/node_modules/</span>es6-promise<span class="regexp">/dist/</span>es6-promise.<span class="string">js:</span><span class="number">304</span>:<span class="number">16</span></span><br><span class="line">&#123;anonymous&#125;() ($)$$internal$$invokeCallback@<span class="regexp">/Users/</span>edjafarov<span class="regexp">/work/</span>PromisePipe<span class="regexp">/node_modules/</span>es6-promise<span class="regexp">/dist/</span>es6-promise.<span class="string">js:</span><span class="number">316</span>:<span class="number">17</span></span><br><span class="line">&#123;anonymous&#125;()@<span class="regexp">/Users/</span>edjafarov<span class="regexp">/work/</span>PromisePipe<span class="regexp">/node_modules/</span>es6-promise<span class="regexp">/dist/</span>es6-promise.<span class="string">js:</span><span class="number">874</span>:<span class="number">13</span></span><br><span class="line">&#123;anonymous&#125;() ($)$asap$$flush@<span class="regexp">/Users/</span>edjafarov<span class="regexp">/work/</span>PromisePipe<span class="regexp">/node_modules/</span>es6-promise<span class="regexp">/dist/</span>es6-promise.<span class="string">js:</span><span class="number">111</span>:<span class="number">9</span></span><br><span class="line">process._tickCallback<span class="annotation">@node</span>.<span class="string">js:</span><span class="number">442</span>:<span class="number">13</span></span><br></pre></td></tr></table></figure></p>
<p>It notifies you that things go wrong though it is not that useful for real life debugging.</p>
<p>What is really helping is that PromisePipe wraps each chain function into the wrapper that is recording data/context values that chain is called with. You can track how the data is transformed by each chain. And it works out of the box. Just setup debug mode for PromisePipe like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PromisePipe.setMode(<span class="string">"DEBUG"</span>)</span><br></pre></td></tr></table></figure>
<p>In chrome it looks like this:</p>
<h2 id="Whats_next">Whats next</h2><ul>
<li><p>We have the decomposition of all calls of the PromisePipe and transformations during the execution. That allows us to record the log of what happened while reproducing the bug by QA and replay the log later by Developer.</p>
</li>
<li><p>As well we can record session to use it for autogeneration of integration tests.</p>
</li>
<li><p>And we can watch a performance of each chain individually.</p>
</li>
</ul>

      
    </div>
    <footer>
        <div class="addthis addthis_toolbox addthis_default_style">
<a href="https://twitter.com/share" class="twitter-share-button" data-via="edjafarov">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </div>

      <br/>
      
      Latest:
      <ul class="list-unstyled">
      
         <li>
              <a href="/2015/06/PromisePipe-debugging/">PromisePipe: debugging</a>
            </li>
          
         <li>
              <a href="/2015/06/PromisePipe-cross-process-homogenous-Promise-chains/">PromisePipe: cross process homogenous Promise chains</a>
            </li>
          
         <li>
              <a href="/2015/06/Responsibility-is-the-best-Motivation/">Responsibility is the best Motivation</a>
            </li>
          
         <li>
              <a href="/2015/01/the-holy-grail-promise-pipes/">The Holy Grail: promise pipes</a>
            </li>
          
         <li>
              <a href="/2014/09/proper-node-webkit-desktop-notifications/">proper node-webkit desktop notifications</a>
            </li>
          
         <li>
              <a href="/2014/07/semantic-styling/">semantic styling</a>
            </li>
          
         <li>
              <a href="/2014/06/node-webkit-autoupdate/">node-webkit autoupdate</a>
            </li>
          
         <li>
              <a href="/2014/05/framework-vs-microlib-architecture/">framework vs microlib architecture</a>
            </li>
          
         <li>
              <a href="/2014/04/angular-is-evil-overengineering/">Angularjs is evil: overengineering hell</a>
            </li>
          
         <li>
              <a href="/2014/04/managers-are-taking-your-projects-breath/">managers are taking your project&#39;s breath</a>
            </li>
          
      </ul>
      
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- hackish -->

  <section id="comment">
</section>
</div>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Eldar Djafarov
  
</div>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<a href="http://stfalcon.github.io/euromaidan/" class="em-ribbon" style="position: absolute; left:0; top:0; width: 90px; height: 90px; background: url('http://stfalcon.github.io/euromaidan/img/em-ribbon.png'); z-index: 2013; border: 0;" title="Розмісти стрічку з символікою України і ЄС на своєму сайті!" target="_blank"></a>
</body>
</html>